<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Flask · 从零开始构建一个简易的个人博客 | 欢迎来到ZYen的小世界！</title><meta name="keywords" content="开发日常"><meta name="author" content="ZYen,1193161901@qq.com"><meta name="copyright" content="ZYen"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="前段时间学习渗透的时候，感觉SSTI模板注入很迷糊，就想着来研究一下flask框架来加深一下SSTI模板注入的理解，然后一发不可收拾，萌生了开发一个搭建个简易博客的想法，接下来就从零开始构建一个简单的博客吧！  Hello，Flask！flask简单来说就是一个WEB框架，那什么是WEB框架呢？在之前的学习当中，前端我们可以使用html，CSS，JavaScript，后端可以使用PHP来编写，最">
<meta property="og:type" content="article">
<meta property="og:title" content="Flask · 从零开始构建一个简易的个人博客">
<meta property="og:url" content="http://example.com/2022/04/12/Flask-%C2%B7-%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%AE%80%E6%98%93%E7%9A%84%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/index.html">
<meta property="og:site_name" content="欢迎来到ZYen的小世界！">
<meta property="og:description" content="前段时间学习渗透的时候，感觉SSTI模板注入很迷糊，就想着来研究一下flask框架来加深一下SSTI模板注入的理解，然后一发不可收拾，萌生了开发一个搭建个简易博客的想法，接下来就从零开始构建一个简单的博客吧！  Hello，Flask！flask简单来说就是一个WEB框架，那什么是WEB框架呢？在之前的学习当中，前端我们可以使用html，CSS，JavaScript，后端可以使用PHP来编写，最">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg">
<meta property="article:published_time" content="2022-04-12T14:23:31.000Z">
<meta property="article:modified_time" content="2022-04-12T16:56:09.675Z">
<meta property="article:author" content="ZYen">
<meta property="article:tag" content="开发日常">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/2022/04/12/Flask-%C2%B7-%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%AE%80%E6%98%93%E7%9A%84%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?[object Object]";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Flask · 从零开始构建一个简易的个人博客',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-04-13 00:56:09'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if (GLOBAL_CONFIG_SITE.isHome && /iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 5.4.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://img-blog.csdnimg.cn/59ff1b82a08c4567938e7b522a9607a8.jpg?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBAWlllbjEyMTM4,size_20,color_FFFFFF,t_70,g_se,x_16" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">25</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">13</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">7</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">欢迎来到ZYen的小世界！</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Flask · 从零开始构建一个简易的个人博客</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-04-12T14:23:31.000Z" title="发表于 2022-04-12 22:23:31">2022-04-12</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-04-12T16:56:09.675Z" title="更新于 2022-04-13 00:56:09">2022-04-13</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%BC%80%E5%8F%91/">开发</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">6.3k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>26分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Flask · 从零开始构建一个简易的个人博客"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><blockquote>
<p>前段时间学习渗透的时候，感觉SSTI模板注入很迷糊，就想着来研究一下flask框架来加深一下SSTI模板注入的理解，然后一发不可收拾，萌生了开发一个搭建个简易博客的想法，接下来就从零开始构建一个简单的博客吧！</p>
</blockquote>
<h2 id="Hello，Flask！"><a href="#Hello，Flask！" class="headerlink" title="Hello，Flask！"></a>Hello，Flask！</h2><p>flask简单来说就是一个WEB框架，那什么是WEB框架呢？在之前的学习当中，前端我们可以使用html，CSS，JavaScript，后端可以使用PHP来编写，最终实现一个WEB网站，那随着时代的发展，这种设计模式慢慢变得有点落后，就出现了一个相当于管理员的应用，也就是前面讲到的WEB框架，它可以帮助你完成很多繁琐的事情，如：路由，响应，请求等等功能，<strong>让你更加的注重网站的开发，剩下的事情统统都交给它就好了！</strong></p>
<p>现在的WEB框架已经演变出了一个完整的体系—-<strong>MTV（Model Template View）也就是模型，模板和视图，这是WEB框架的核心</strong>，一切都是围绕这三个部分来构建的，模型是指数据库模型，用于处理后端的数据，模板是指前端页面的展示，它和URL的联系是通过视图函数来实现的，也可以称他为路由，后面会慢慢的认识到这个体系的精巧！</p>
<img src="/2022/04/12/Flask-%C2%B7-%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%AE%80%E6%98%93%E7%9A%84%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/8.png" class="">

<p>最后，其实在python的世界里不单单只有flask这一个框架，比较常见的还有tornado，Django，flask与它们的区别就在于量级和线程，也就是说flask相较于它们来说比较简单，更容易上手一些，所以研究web框架的第一站我就选择了flask来进行研究！</p>
<h3 id="虚拟环境"><a href="#虚拟环境" class="headerlink" title="虚拟环境"></a>虚拟环境</h3><p>在创建第一个flask应用程序之前，还得介绍一个环境，就是虚拟环境，为啥需要这个环境呢？其实很简单，<strong>就是防止函数库冲突</strong>，我们都知道在写一些比较大型的python应用程序的时候都需要导入库，那问题就来了，今天这个项目需要flask1.0来写，我们就去装一个flask1.0，明天那个项目需要flask1.1.2来写，我们就去装一个flask1.1.2，可能在某些读者看来这无伤大雅，只是一个卸载和安装的问题，可是一个项目并不可能只导入一个库，当几十个库都需要更换的时候，这个工作量就显得有点大了！</p>
<p>那如何使用和安装一个虚拟环境呢？这也很简单，在开发的过程当中我们都会使用IDE，也就是学python都会用的Pycharm，它其实已经为减掉了大部分的繁琐工作，当New Project的时候就已经创建好了一个虚拟的环境，你也可以选择下面的Existing interpreter来加载已经存在的虚拟环境，之后你所安装的所有库都归这个虚拟环境所有！（Pycharm社区版没用New Flask Project的功能，需要自行pip安装）</p>
<img src="/2022/04/12/Flask-%C2%B7-%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%AE%80%E6%98%93%E7%9A%84%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/1.png" class="">

<p>若是需要通过命令行来创建虚拟机环境可以参照下面的链接：</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/yawei_liu1688/article/details/111689527">linux创建虚拟环境（python虚拟环境）</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/lilygg/article/details/116452984">创建Linux虚拟环境的两种方式 venv 与 virtualenvwrapper 以及 Pycharm 如何连接 Linux虚拟环境</a></p>
<h2 id="项目结构"><a href="#项目结构" class="headerlink" title="项目结构"></a>项目结构</h2><p>创建完项目之后，可以看到下面的包结构：</p>
<blockquote>
<p>— 项目名称</p>
<p>​        |—- static</p>
<p>​        |—- templates</p>
<p>​        |—- app.py</p>
</blockquote>
<p>static通常来说都是存放CSS，JavaScript脚本，图片等等，templates存放html，app.py就为flask项目的启动文件，在编写代码的时候最好按照这种模式来存放文件，因为在后面可以看到在一些函数中已经做了类似宏定义的东西，轻易打破这种设定会导致一下奇奇怪怪的问题产生….</p>
<h2 id="运行Flask服务器！"><a href="#运行Flask服务器！" class="headerlink" title="运行Flask服务器！"></a>运行Flask服务器！</h2><p>点开app.py其实里面已经写好了一段代码，这个代码的意思后面再慢慢道来，我们先将其运行起来，可以看到在下面出现一个链接：<a target="_blank" rel="noopener" href="http://localhost:5000/%EF%BC%8C%E7%82%B9%E5%BC%80%E4%B9%8B%E5%90%8E%EF%BC%8C%E4%B8%80%E4%B8%AAHello">http://localhost:5000/，点开之后，一个Hello</a> World！就出现在屏幕上！！！这算是我们的第一个flask程序！</p>
<img src="/2022/04/12/Flask-%C2%B7-%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%AE%80%E6%98%93%E7%9A%84%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/2.png" class="">

<h2 id="为什么要传递-name-？"><a href="#为什么要传递-name-？" class="headerlink" title="为什么要传递__name__？"></a>为什么要传递<code>__name__</code>？</h2><p>在刚刚的代码中，第一行就是下面这个代码，它去创建一个类，并将<code>__name__</code>传递进去，我们都知道<code>__name__</code>是当前模块的名字</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_41589031/article/details/110134349"><code>__name__</code>的用法</a></p>
<p>这到底在干嘛呢？按住Ctrl点击Flask，我们进源码一探究竟！</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app = Flask(__name__)</span><br></pre></td></tr></table></figure>

<p>进来看到Flask的描述，下面摘取一些比较重要的描述：</p>
<blockquote>
<p>The flask object implements a WSGI application and acts as the central object.  It is passed the name of the module or package of the application.  Once it is created it will act as a central registry for the view functions, the URL rules, template configuration and much more.</p>
<p>……</p>
<p>The idea of the first parameter is to give Flask an idea of what belongs to your application.  This name is used to find resources on the filesystem, can be used by extensions to improve debugging information and a lot more.</p>
<p>So it’s important what you provide there.  If you are using a single module, <code>__name__</code> is always the correct value.  If you however are using a package, it’s usually recommended to hardcode the name of your package there.</p>
<p>……</p>
<p>Why is that?  The application will work even with <code>__name__</code>, thanks to how resources are looked up.  However it will make debugging more painful.  Certain extensions can make assumptions based on the import name of your application.  For example the Flask-SQLAlchemy extension will look for the code in your application that triggered an SQL query in debug mode.  If the import name is not properly set up, that debugging information is lost.  (For example it would only pick up SQL queries in <code>yourapplication.app</code> and not <code>yourapplication.views.frontend</code>)</p>
</blockquote>
<p>翻译一下可知：</p>
<ul>
<li>Flask启动了WSGI一个应用<ul>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/95942024">WSGI到底是什么？</a></li>
</ul>
</li>
<li>Flask是通过第一个参数，也就是<code>__name__</code>来查找资源</li>
<li>如果没有传递<code>__name__</code>会丢失很多调试信息</li>
</ul>
<p>到这也就知道为啥要传递<code>__name__</code>这个参数了，Flask服务器是通过模块的名字来定位程序的位置的，并作为起点来计算绝对路径，往下翻看到<code>__init__</code>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params"></span></span></span><br><span class="line"><span class="params"><span class="function">    self,</span></span></span><br><span class="line"><span class="params"><span class="function">    import_name: <span class="built_in">str</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">    static_url_path: t.<span class="type">Optional</span>[<span class="built_in">str</span>] = <span class="literal">None</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">    static_folder: t.<span class="type">Optional</span>[t.<span class="type">Union</span>[<span class="built_in">str</span>, os.PathLike]] = <span class="string">&quot;static&quot;</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">    static_host: t.<span class="type">Optional</span>[<span class="built_in">str</span>] = <span class="literal">None</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">    host_matching: <span class="built_in">bool</span> = <span class="literal">False</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">    subdomain_matching: <span class="built_in">bool</span> = <span class="literal">False</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">    template_folder: t.<span class="type">Optional</span>[<span class="built_in">str</span>] = <span class="string">&quot;templates&quot;</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">    instance_path: t.<span class="type">Optional</span>[<span class="built_in">str</span>] = <span class="literal">None</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">    instance_relative_config: <span class="built_in">bool</span> = <span class="literal">False</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">    root_path: t.<span class="type">Optional</span>[<span class="built_in">str</span>] = <span class="literal">None</span>,</span></span></span><br><span class="line"><span class="params"><span class="function"></span>)</span></span><br></pre></td></tr></table></figure>

<p>除了import_name其他变量都是有默认值的，看到下面的static_folder和template_folder，回过头想想当初的项目结构，是不是就明白为啥需要遵循那样的规则？</p>
<h3 id="配置调试模式"><a href="#配置调试模式" class="headerlink" title="配置调试模式"></a>配置调试模式</h3><p>在不做任何配置的时候，Flask是默认不开启调试模式的，可以通过打印app.config来查看：</p>
<img src="/2022/04/12/Flask-%C2%B7-%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%AE%80%E6%98%93%E7%9A%84%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/3.jpg" class="">

<p>开启的方法有三种：</p>
<ul>
<li>直接在Pycharm的配置文件中开启即可：Run -&gt; Edit Configurations… -&gt; FLASK_DUBUG</li>
<li>在app.py加入配置：app.config[‘DUBUG’] = True</li>
<li>修改启动的参数：app.run(debug=True)</li>
</ul>
<p>讲完了开启的方法，那开启了调试模式有啥用呢？</p>
<ul>
<li>即平时修改代码后项目不会自动更新代码，如果开启调试模式之后，项目检查到被修改就会自动重新启动更新，很方便有没有！</li>
<li>同时在发生服务器中有代码错误的时候，会将错误信息展示出来，方便开发人员定位错误</li>
</ul>
<p>为了防止项目耦合，在创建一个config.py文件存放配置信息：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Config</span>(<span class="params"><span class="built_in">object</span></span>):</span></span><br><span class="line">    ENV = <span class="string">&quot;development&quot;</span></span><br><span class="line">	DUBUG = <span class="literal">True</span></span><br></pre></td></tr></table></figure>

<p>在app.py导入配置文件：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> config <span class="keyword">import</span> Config</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line">app.config.from_object(Config)</span><br></pre></td></tr></table></figure>



<h2 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h2><p>路由顾名思义就是指路的，当浏览器访问<a target="_blank" rel="noopener" href="http://localhost:5000/%E7%9A%84%E6%97%B6%E5%80%99%E5%8F%91%E9%80%81%E4%BA%86%E4%BB%80%E4%B9%88%E5%91%A2%EF%BC%9F%E7%AD%94%E6%A1%88%E5%BE%88%E7%AE%80%E5%8D%95%EF%BC%8C%E5%BD%93%E6%B5%8F%E8%A7%88%E5%99%A8%E8%AE%BF%E9%97%AE%E7%9A%84%E6%97%B6%E5%80%99%E5%B0%B1%E6%84%8F%E5%91%B3%E7%9D%80%E5%AE%83%E5%90%91Flask%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%8F%91%E9%80%81%E4%BA%86%E8%AF%B7%E6%B1%82%EF%BC%8CFlask%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%A0%B9%E6%8D%AEURL%E6%89%BE%E5%88%B0%E5%AF%B9%E5%BA%94%E7%9A%84%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0%EF%BC%8C%E7%84%B6%E5%90%8E%E6%89%A7%E8%A1%8C%EF%BC%8C%E6%9C%80%E5%90%8E%E8%BF%94%E5%9B%9E%EF%BC%8C%E9%82%A3%E4%B9%88%E9%97%AE%E9%A2%98%E5%8F%88%E6%9D%A5%E4%BA%86%EF%BC%9AFlask%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%98%AF%E8%BF%99%E4%B9%88%E6%89%BE%E5%88%B0%E5%AF%B9%E5%BA%94%E7%9A%84%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0%E7%9A%84%E5%91%A2%EF%BC%9F%E6%B2%A1%E9%94%99%EF%BC%81%E5%B0%B1%E6%98%AF%E8%A3%85%E9%A5%B0%E5%99%A8%EF%BC%8C%E4%B9%9F%E5%B0%B1%E6%98%AF%E4%B8%8B%E9%9D%A2%E7%9A%84app.route%E9%87%8C%E9%9D%A2%E7%9A%84%E5%8F%82%E6%95%B0%EF%BC%8C%E9%87%8C%E9%9D%A2%E6%98%AF%E2%80%9C/%E2%80%9D%EF%BC%8C%E5%B0%B1%E6%98%AF%E8%AF%B4%E5%BD%93%E6%B5%8F%E8%A7%88%E5%99%A8%E8%AF%B7%E6%B1%82%E2%80%9C/%E2%80%9D%E7%9A%84%E6%97%B6%E5%80%99%E5%B0%B1%E4%BC%9A%E8%BF%9B%E5%88%B0%E8%AF%A5%E8%A3%85%E9%A5%B0%E5%99%A8%E5%BA%95%E4%B8%8B%E7%9A%84%E8%A7%86%E5%9B%BE%E5%87%BD%E6%95%B0%E5%BD%93%E4%B8%AD%EF%BC%8C%E5%9B%A0%E4%B8%BA%E5%87%BD%E6%95%B0%E8%BF%94%E5%9B%9E%E7%9A%84%E6%98%AF%E4%B8%80%E4%B8%AA%E5%AD%97%E7%AC%A6%E4%B8%B2%EF%BC%8C%E7%84%B6%E5%90%8E%E6%B5%8F%E8%A7%88%E5%99%A8%E6%8E%A5%E5%8F%97Flask%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%BF%94%E5%9B%9E%E7%9A%84%E6%95%B0%E6%8D%AE%E5%B9%B6%E8%BF%9B%E8%A1%8C%E6%98%BE%E7%A4%BA%EF%BC%8C%E4%B9%9F%E5%B0%B1%E6%98%AF%E4%B9%8B%E5%89%8D%E7%9C%8B%E5%88%B0%E7%9A%84Hello">http://localhost:5000/的时候发送了什么呢？答案很简单，当浏览器访问的时候就意味着它向Flask服务器发送了请求，Flask服务器根据URL找到对应的处理函数，然后执行，最后返回，那么问题又来了：Flask服务器是这么找到对应的处理函数的呢？没错！就是装饰器，也就是下面的app.route里面的参数，里面是“/”，就是说当浏览器请求“/”的时候就会进到该装饰器底下的视图函数当中，因为函数返回的是一个字符串，然后浏览器接受Flask服务器返回的数据并进行显示，也就是之前看到的Hello</a> World!</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/&#x27;</span></span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello_world</span>():</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;Hello World!&#x27;</span></span><br></pre></td></tr></table></figure>

<p>我们已经知道浏览器会接受Flask服务器返回的数据并进行显示，刚刚返回的是字符串，那html它能成功接收并显示吗？</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/&#x27;</span></span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello_world</span>():</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;&lt;font color=&quot;red&quot;&gt;Hello World!&lt;/font&gt;&#x27;</span></span><br></pre></td></tr></table></figure>

<p>答案肯定是可以的：</p>
<img src="/2022/04/12/Flask-%C2%B7-%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%AE%80%E6%98%93%E7%9A%84%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/4.png" class="">

<p>通过F12查看Response Headers中的Content-Type可以发现它是text/html，<strong>其实它本质将接收的内容转换成html然后再显示！</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Content-Length: 37</span><br><span class="line">Content-Type: text/html; charset=utf-8</span><br><span class="line">Date: Sun, 27 Mar 2022 07:17:03 GMT</span><br><span class="line">Server: Werkzeug/2.0.3 Python/3.8.2</span><br></pre></td></tr></table></figure>

<p>那除了html格式还要其他格式吗？有的，也就是json格式，当返回的是一个字典的时候它为<code>application/json</code>格式的：</p>
<img src="/2022/04/12/Flask-%C2%B7-%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%AE%80%E6%98%93%E7%9A%84%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/5.jpg" class="">



<h2 id="模板"><a href="#模板" class="headerlink" title="模板"></a>模板</h2><p>在上节中，通过返回一个字符串来让浏览器渲染成text/html，所以可以直接返回一个html让浏览器渲染，但一般不会在视图函数中直接写html代码，因为当项目逐渐变大的时候，html也开始变得十分的复杂，这样就会让视图函数特别的臃肿，那么模板的概念也就引入进来了！所有的html都放在templates中，下面创建一个index.html，可以看到下面的html多了几个陌生的语法，这是动态网页的灵魂，可以通过动态传入相应的值让浏览器来渲染，用法其实很简单，（1）用来放置变量，（2）来放置控制语句，需要注意的是结尾有个（3）来标记控制语句的结束</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!doctype <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        &#123;% if title %&#125; </span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>&#123;&#123; title &#125;&#125; - Myblog<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        &#123;% else %&#125;</span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>Welcome to Myblog<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        &#123;% endif %&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">   	<span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hi, &#123;&#123; user.username &#125;&#125;!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span>（2）</span><br><span class="line">    &#123;% for post in posts %&#125;（1）</span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; user.username &#125;&#125; says: <span class="tag">&lt;<span class="name">b</span>&gt;</span>&#123;&#123; user.body &#125;&#125;<span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    &#123;% endfor %&#125;（3）</span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>那怎么引入呢？答：render_template（），就像下面一样，刚刚说到可以传递参数进去动态渲染，user=user就是传递参数的方式</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/&#x27;</span></span>)</span></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/index&#x27;</span></span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">index</span>():</span></span><br><span class="line">    user = &#123;<span class="string">&quot;username&quot;</span>: <span class="string">&quot;zyen&quot;</span>, <span class="string">&quot;body&quot;</span>: <span class="string">&quot;want to be a best hacker!&quot;</span>&#125;</span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">&quot;index.html&quot;</span>, user=user)</span><br></pre></td></tr></table></figure>

<h3 id="模板继承"><a href="#模板继承" class="headerlink" title="模板继承"></a>模板继承</h3><p>既然开始建立模板，就不得不得提模板继承，在博客中，总有一些页面元素是一成不变的，为了解耦，我们来创建一个父模板，让剩下需要父模板中的内容的子模板继承就好了，创建一个base.html，键入下面的内容：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!doctype <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        &#123;% if title %&#125;</span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>&#123;&#123; title &#125;&#125; - Myblog<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        &#123;% else %&#125;</span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>Welcome to Myblog<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        &#123;% endif %&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">            Microblog:</span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&#123;&#123; url_for(&#x27;.index&#x27;) &#125;&#125;&quot;</span>&gt;</span>Home<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">        &#123;% block content %&#125;&#123;% endblock %&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>一个block就是可以重写的部分，剩下的内容都会继承：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% block content %&#125;&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure>

<p>那么我们的index.html就可以通过extends来继承base.html，再在block中加上需要重写的部分</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;% extends &quot;base.html&quot; %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block content %&#125;</span><br><span class="line">   	&lt;h1&gt;Hi, &#123;&#123; user.username &#125;&#125;!&lt;/h1&gt;</span><br><span class="line">    &lt;div&gt;&lt;p&gt;&#123;&#123; user.username &#125;&#125; says: &lt;b&gt;&#123;&#123; user.body &#125;&#125;&lt;/b&gt;&lt;/p&gt;&lt;/div&gt;</span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure>

<p>重新启动服务器可看到，模板已经正常工作！</p>
<img src="/2022/04/12/Flask-%C2%B7-%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%AE%80%E6%98%93%E7%9A%84%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/6.jpg" class="">

<h3 id="过滤器"><a href="#过滤器" class="headerlink" title="过滤器"></a>过滤器</h3><p>过滤器顾名思义就说过滤某种东西的，在Flask的世界里，我们可以通过<code>&#123;&#123; （value）| （filter） &#125;&#125;</code>的形式来使用过滤器，filter可以理解成一个内置的函数，就比如平常在计算某个字符串的长度的时候都会去调用length（value）来计算长度，但在模板当中却是用<code>&#123;&#123;（value）| length &#125;&#125;</code>，所以本质上还是差不多的，下面列举一些常见的过滤器，提醒一下过滤器是可以进行嵌套的<code>&#123;&#123; （value）| （filter_1）（filter_2）（filter_3）... &#125;&#125;</code>，执行的顺序就是从左到右</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 把大写字母转换成小写</span></span><br><span class="line">&#123;&#123; <span class="string">&#x27;HELLO&#x27;</span> | lower&#125;&#125;</span><br><span class="line"><span class="comment"># 把小写转换成大写</span></span><br><span class="line">&#123;&#123; <span class="string">&#x27;hello&#x27;</span>| upper &#125;&#125;</span><br><span class="line"><span class="comment"># 字符串反转</span></span><br><span class="line">&#123;&#123; <span class="string">&#x27;hack&#x27;</span> | reverse&#125;&#125;</span><br><span class="line"><span class="comment"># 首字母大写，其余字母小写</span></span><br><span class="line">&#123;&#123; <span class="string">&#x27;zyen&#x27;</span> | capitalize &#125;&#125;</span><br><span class="line"><span class="comment"># 过滤html标签 em标签是斜体</span></span><br><span class="line">&#123;&#123; <span class="string">&#x27;&lt;em&gt;hellp&lt;/em&gt;&#x27;</span> | striptags&#125;&#125;</span><br><span class="line"><span class="comment"># 只显list首个元素</span></span><br><span class="line">&#123;&#123; [<span class="number">100</span>,<span class="number">90</span>,<span class="number">86</span>] | first &#125;&#125;</span><br><span class="line"><span class="comment"># 只显list最后一个元素</span></span><br><span class="line">&#123;&#123; [<span class="number">100</span>,<span class="number">90</span>,<span class="number">86</span>] | last &#125;&#125;</span><br><span class="line"><span class="comment"># 显示一个list的长度</span></span><br><span class="line">&#123;&#123; [<span class="number">1</span>,<span class="number">2</span>] | length &#125;&#125;</span><br><span class="line"><span class="comment"># 对list所有元素求和</span></span><br><span class="line">&#123;&#123; [<span class="number">100</span>,<span class="number">200</span>] | <span class="built_in">sum</span> &#125;&#125;</span><br><span class="line"><span class="comment"># 对于list进行排序</span></span><br><span class="line">&#123;&#123; [<span class="number">4</span>,<span class="number">5</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">7</span>] | sort&#125;&#125;</span><br><span class="line"><span class="comment"># 链调用过滤器,按顺序执行</span></span><br><span class="line">&#123;&#123; <span class="string">&#x27;abc&#x27;</span> | reverse | upper &#125;&#125;</span><br></pre></td></tr></table></figure>

<p>那既然过滤器相当于python中的内置函数，所以过滤器也是可以自定义过滤器的，自定义过滤器的方法有两种：</p>
<ul>
<li>通过装饰器来添加</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@app.template_filter(<span class="params"><span class="string">&#x27;replace_strings&#x27;</span></span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">replace_hello</span>(<span class="params">value</span>):</span></span><br><span class="line">    value_tmp = value.replace(<span class="string">&#x27;best boy&#x27;</span>, <span class="string">&#x27;hacker&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> value_tmp</span><br></pre></td></tr></table></figure>

<ul>
<li>通过app的方法来替换内置的方法</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">replace_hello</span>(<span class="params">value</span>):</span></span><br><span class="line">    value_tmp = value.replace(<span class="string">&#x27;best boy&#x27;</span>, <span class="string">&#x27;hacker&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> value_tmp</span><br><span class="line"></span><br><span class="line"><span class="comment"># add_template_filter的参数一是调用的视图函数，参数二是替换的内置方法</span></span><br><span class="line">app.add_template_filter(replace_hello, <span class="string">&quot;replace&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>在模板中调用刚刚定义好的视图函数：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;% extends &quot;base.html&quot; %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block content %&#125;</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hi,&#123;&#123; user.username &#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">&#123;# 传递user = &#123;&quot;username&quot;: &quot;zyen&quot;, &quot;post&quot;: &quot;i am best boy&quot;&#125;进来渲染 #&#125;</span><br><span class="line">&#123;&#123; user.username &#125;&#125; say: &#123;&#123; user.post | replace &#125;&#125;<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"></span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure>

<p>执行后看到i am best boy被替换成i am hacker，其实自定义过滤器的用法就在于此，当某个用户可控的输入中，我们需要进行更加细致的过滤的时候，可以通过自定义一个正则过滤的过滤器来对用户的输入进行过滤！</p>
<img src="/2022/04/12/Flask-%C2%B7-%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%AE%80%E6%98%93%E7%9A%84%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/7.png" class="">



<h2 id="模型"><a href="#模型" class="headerlink" title="模型"></a>模型</h2><p>终于来到模型，我们的网站不可能每次启动都需要重新输入数据才能使用，总得将数据持久化，所有这节来讲讲数据库！Flask并没有内置数据库，目的也是为了轻量级的考虑，所以它得引用外部的数据库扩展，可选的数据库有MySQL，PostgreSQL和SQLite，这里我使用的是MySQL，SQLite参考下面的文章：</p>
<p><a target="_blank" rel="noopener" href="https://github.com/luhuisicnu/The-Flask-Mega-Tutorial-zh/blob/master/docs/%e7%ac%ac%e5%9b%9b%e7%ab%a0%ef%bc%9a%e6%95%b0%e6%8d%ae%e5%ba%93.md">SQLite配置指南</a></p>
<h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><p>使用MySQL之前需要添加一些配置才能愉快的使用数据库，首先需要打通python和数据库的联系，这里用的是MySQL，所以pymysql首当其冲，接下来是Flask和python的联系，就得用到Flask的核心插件Flask-SQLAlchemy，这个插件封装了一个很有用的功能就是ORM（Object Relational Mapping，对象关系映射），用简单的话说就是可以用类，对象来表示数据库中的一张表，现在不理解没关系，等下就会明白它的含义！最后的最后是一个管理工具—-Flask-Migrate，是SQLAlchemy的一个数据库迁移框架，它可以通过命令行很方便的去操作数据库，它们的关系如下：</p>
<img src="/2022/04/12/Flask-%C2%B7-%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%AE%80%E6%98%93%E7%9A%84%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/9.png" class="" width="9">

<p>在根目录创建config.py写入一系列的配置，为了调用方便，定义一个Config类，这样</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Config</span>(<span class="params"><span class="built_in">object</span></span>):</span></span><br><span class="line">    SQLALCHEMY_DATABASE_URI = <span class="string">&quot;mysql+pymysql://root:(数据库密码)@127.0.0.1/（数据库名）&quot;</span></span><br><span class="line">    SQLALCHEMY_TRACT_MODIFICATIONS = <span class="literal">False</span></span><br><span class="line">    <span class="comment"># 启动调试模式</span></span><br><span class="line">    ENV = <span class="string">&quot;development&quot;</span></span><br><span class="line">    DEBUG = <span class="literal">True</span></span><br></pre></td></tr></table></figure>

<p>在<code>app/__init__.py</code>中添加下面的代码生效配置：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> config <span class="keyword">import</span> Config</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line">app.config.from_object(Config)</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>由于版本问题导致会有一些奇奇怪怪的报错，下面列举一些我测试可用的版本：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">alembic==<span class="number">1.4</span><span class="number">.2</span></span><br><span class="line">click==<span class="number">7.1</span><span class="number">.2</span></span><br><span class="line">colorama==<span class="number">0.4</span><span class="number">.4</span></span><br><span class="line">Flask==<span class="number">1.1</span><span class="number">.2</span></span><br><span class="line">Flask-Migrate==<span class="number">2.5</span><span class="number">.3</span></span><br><span class="line">Flask-SQLAlchemy==<span class="number">2.4</span><span class="number">.1</span></span><br><span class="line">greenlet==<span class="number">1.1</span><span class="number">.2</span></span><br><span class="line">itsdangerous==<span class="number">1.1</span><span class="number">.0</span></span><br><span class="line">Jinja2==<span class="number">2.11</span><span class="number">.2</span></span><br><span class="line">Mako==<span class="number">1.1</span><span class="number">.2</span></span><br><span class="line">MarkupSafe==<span class="number">1.1</span><span class="number">.1</span></span><br><span class="line">PyMySQL==<span class="number">1.0</span><span class="number">.2</span></span><br><span class="line">python-dateutil==<span class="number">2.8</span><span class="number">.2</span></span><br><span class="line">python-editor==<span class="number">1.0</span><span class="number">.4</span></span><br><span class="line">six==<span class="number">1.14</span><span class="number">.0</span></span><br><span class="line">SQLAlchemy==<span class="number">1.3</span><span class="number">.17</span></span><br><span class="line">Werkzeug==<span class="number">1.0</span><span class="number">.1</span></span><br></pre></td></tr></table></figure>

<p>保存到名为requirements.txt中并放到项目下，在虚拟环境命令行中输入下面的命令进行安装</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install -r requirements.txt</span><br></pre></td></tr></table></figure>

<p>在<code>app/__init__.py</code>添加下面的配置，需要注意的是此版本下的Migrate需要配合Manager命令行管理工具才能正常使用，高版本不需要这一步</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask_migrate <span class="keyword">import</span> Migrate, MigrateCommand</span><br><span class="line"><span class="keyword">from</span> flask_script <span class="keyword">import</span> Manager</span><br><span class="line"><span class="keyword">from</span> flask_sqlalchemy <span class="keyword">import</span> SQLAlchemy</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line">db = SQLAlchemy(app)</span><br><span class="line">manager = Manager(app=app)</span><br><span class="line">migrate = Migrate(app=app, db=db)</span><br><span class="line">manager.add_command(<span class="string">&#x27;db&#x27;</span>, MigrateCommand)</span><br></pre></td></tr></table></figure>

<p>最后在app.py修改启动方式为manager</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> app <span class="keyword">import</span> manager</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    manager.run()</span><br></pre></td></tr></table></figure>

<p>在虚拟环境的命令行中用运行app.py，出现下面配置则配置完成！可以看到命令行参数中有个db的选项</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">(venv) C:\Users\zyen\PycharmProjects\myblog&gt;python app.py</span><br><span class="line">C:\Users\zyen\PycharmProjects\myblog\venv\lib\site-packages\flask_sqlalchemy\__init__.py:<span class="number">834</span>: FSADeprecationWarning: SQLALCHEMY_TRACK_MODIFICATIONS adds significant overhead <span class="keyword">and</span> will b</span><br><span class="line">e disabled by default <span class="keyword">in</span> the future.  <span class="type">Set</span> it to <span class="literal">True</span> <span class="keyword">or</span> <span class="literal">False</span> to suppress this warning.</span><br><span class="line">  warnings.warn(FSADeprecationWarning(</span><br><span class="line">usage: app.py [-?] &#123;db,shell,runserver&#125; ...</span><br><span class="line"></span><br><span class="line">positional arguments:</span><br><span class="line">  &#123;db,shell,runserver&#125;</span><br><span class="line">    db                  Perform database migrations</span><br><span class="line">    shell               Runs a Python shell inside Flask application context.</span><br><span class="line">    runserver           Runs the Flask development server i.e. app.run()</span><br><span class="line"></span><br><span class="line">optional arguments:</span><br><span class="line">  -?, --<span class="built_in">help</span>            show this <span class="built_in">help</span> message <span class="keyword">and</span> exit</span><br></pre></td></tr></table></figure>

<p>在后面添加db，可以看到很多参数，这些参数就是Flask-Migrate用来操作数据库的命令，常用的为init，migrate，upgrade</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">(venv) C:\Users\zyen\PycharmProjects\myblog&gt;python app.py db</span><br><span class="line">C:\Users\zyen\PycharmProjects\myblog\venv\lib\site-packages\flask_sqlalchemy\__init__.py:<span class="number">834</span>: FSADeprecationWarning: SQLALCHEMY_TRACK_MODIFICATIONS adds significant overhead <span class="keyword">and</span> will b</span><br><span class="line">e disabled by default <span class="keyword">in</span> the future.  <span class="type">Set</span> it to <span class="literal">True</span> <span class="keyword">or</span> <span class="literal">False</span> to suppress this warning.</span><br><span class="line">  warnings.warn(FSADeprecationWarning(</span><br><span class="line">usage: Perform database migrations</span><br><span class="line"></span><br><span class="line">Perform database migrations</span><br><span class="line"></span><br><span class="line">positional arguments:</span><br><span class="line">  &#123;init,revision,migrate,edit,merge,upgrade,downgrade,show,history,heads,branches,current,stamp&#125;</span><br><span class="line">    init                Creates a new migration repository</span><br><span class="line">    revision            Create a new revision file.</span><br><span class="line">    migrate             Alias <span class="keyword">for</span> <span class="string">&#x27;revision --autogenerate&#x27;</span></span><br><span class="line">    edit                Edit current revision.</span><br><span class="line">    merge               Merge two revisions together. Creates a new migration file</span><br><span class="line">    upgrade             Upgrade to a later version</span><br><span class="line">    downgrade           Revert to a previous version</span><br><span class="line">    show                Show the revision denoted by the given symbol.</span><br><span class="line">    history             <span class="type">List</span> changeset scripts <span class="keyword">in</span> chronological order.</span><br><span class="line">    heads               Show current available heads <span class="keyword">in</span> the script directory</span><br><span class="line">    branches            Show current branch points</span><br><span class="line">    current             Display the current revision <span class="keyword">for</span> each database.</span><br><span class="line">    stamp               <span class="string">&#x27;stamp&#x27;</span> the revision table <span class="keyword">with</span> the given revision; don<span class="string">&#x27;t run any migrations</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">optional arguments:</span></span><br><span class="line"><span class="string">  -?, --help            show this help message and exit</span></span><br></pre></td></tr></table></figure>

<h3 id="创建User表"><a href="#创建User表" class="headerlink" title="创建User表"></a>创建User表</h3><p>刚刚讲到可以用类，对象来代替表的定义，接下来定义一个User类，在app包下创建models.py专门存放数据库表，User类继承db.Model，让它拥有db.Model的方法，如定义列和类型，查询数据库内容等，db. Column指的是数据库中的一列，db. Integer/db. String等一些系列的用法都是在定义字段的类型，下面的链接列举了全部的字段和对应的解释：</p>
<p><a target="_blank" rel="noopener" href="https://blog.51cto.com/u_13914991/2172809">SQLAlchemy配置说明，字段类型，约束条件</a></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> app <span class="keyword">import</span> db</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span>(<span class="params">db.Model</span>):</span></span><br><span class="line">    <span class="built_in">id</span> = db.Column(db.Integer, primary_key=<span class="literal">True</span>)</span><br><span class="line">    username = db.Column(db.String(<span class="number">64</span>), index=<span class="literal">True</span>, unique=<span class="literal">True</span>)</span><br><span class="line">    email = db.Column(db.String(<span class="number">128</span>), index=<span class="literal">True</span>, unique=<span class="literal">True</span>)</span><br><span class="line">    password_hash = db.Column(db.String(<span class="number">128</span>))</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__repr__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&lt;User &#123;&#125;&gt;&quot;</span>.<span class="built_in">format</span>(self.username)</span><br></pre></td></tr></table></figure>

<p>定义好类之后就可以可以创建ORM映射，在命令行中使用init初始化数据库，执行完成之后可以看到它创建了一个目录migrations，里面有个需要注意的目录<strong>versions</strong>，里面存放的是目前所有创建过的映射！</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">(venv) C:\Users\zyen\PycharmProjects\myblog&gt;python app.py db init</span><br><span class="line">C:\Users\zyen\PycharmProjects\myblog\venv\lib\site-packages\flask_sqlalchemy\__init__.py:834: FSADeprecationWarning: SQLALCHEMY_TRACK_MODIFICATIONS adds significant overhead and will b</span><br><span class="line">e disabled by default in the future.  Set it to True or False to suppress this warning.</span><br><span class="line">  warnings.warn(FSADeprecationWarning(</span><br><span class="line">Creating directory C:\Users\zyen\PycharmProjects\myblog\migrations ...  done</span><br><span class="line">Creating directory C:\Users\zyen\PycharmProjects\myblog\migrations\versions ...  done</span><br><span class="line">Generating C:\Users\zyen\PycharmProjects\myblog\migrations\alembic.ini ...  done</span><br><span class="line">Generating C:\Users\zyen\PycharmProjects\myblog\migrations\env.py ...  done</span><br><span class="line">Generating C:\Users\zyen\PycharmProjects\myblog\migrations\README ...  done</span><br><span class="line">Generating C:\Users\zyen\PycharmProjects\myblog\migrations\script.py.mako ...  done</span><br><span class="line">Please edit configuration/connection/logging settings in &#x27;C:\\Users\\zyen\\PycharmProjects\\myblog\\migrations\\alembic.ini&#x27; before proceeding.</span><br></pre></td></tr></table></figure>

<p>接下来就创建ORM映射，可以看到在versions文件夹里面创建了一个d0b26b497fd8_.py的文件，这个其实就是本次映射所要执行的数据库命令，为什么说versions目录需要注意，就是这个原因</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">(venv) C:\Users\zyen\PycharmProjects\myblog&gt;python app.py db migrate</span><br><span class="line">C:\Users\zyen\PycharmProjects\myblog\venv\lib\site-packages\flask_sqlalchemy\__init__.py:834: FSADeprecationWarning: SQLALCHEMY_TRACK_MODIFICATIONS adds significant overhead and will b</span><br><span class="line">e disabled by default in the future.  Set it to True or False to suppress this warning.</span><br><span class="line">  warnings.warn(FSADeprecationWarning(</span><br><span class="line">INFO  [alembic.runtime.migration] Context impl MySQLImpl.</span><br><span class="line">INFO  [alembic.runtime.migration] Will assume non-transactional DDL.</span><br><span class="line">INFO  [alembic.autogenerate.compare] Detected added table &#x27;user&#x27;</span><br><span class="line">INFO  [alembic.autogenerate.compare] Detected added index &#x27;ix_user_email&#x27; on &#x27;[&#x27;email&#x27;]&#x27;</span><br><span class="line">INFO  [alembic.autogenerate.compare] Detected added index &#x27;ix_user_username&#x27; on &#x27;[&#x27;username&#x27;]&#x27;</span><br><span class="line">INFO  [alembic.autogenerate.compare] Detected added table &#x27;post&#x27;</span><br><span class="line">INFO  [alembic.autogenerate.compare] Detected added index &#x27;ix_post_timeStep&#x27; on &#x27;[&#x27;timeStep&#x27;]&#x27;</span><br><span class="line">Generating C:\Users\zyen\PycharmProjects\myblog\migrations\versions\d0b26b497fd8_.py ...  done</span><br></pre></td></tr></table></figure>

<p>接下来通过upgrade来更新表</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(venv) C:\Users\zyen\PycharmProjects\myblog&gt;python app.py db upgrade</span><br><span class="line">C:\Users\zyen\PycharmProjects\myblog\venv\lib\site-packages\flask_sqlalchemy\__init__.py:834: FSADeprecationWarning: SQLALCHEMY_TRACK_MODIFICATIONS adds significant overhead and will b</span><br><span class="line">e disabled by default in the future.  Set it to True or False to suppress this warning.</span><br><span class="line">  warnings.warn(FSADeprecationWarning(</span><br><span class="line">INFO  [alembic.runtime.migration] Context impl MySQLImpl.</span><br><span class="line">INFO  [alembic.runtime.migration] Will assume non-transactional DDL.</span><br><span class="line">INFO  [alembic.runtime.migration] Running upgrade  -&gt; d0b26b497fd8, empty message</span><br></pre></td></tr></table></figure>

<p>更新完之后，数据库已经存在User表了！！！至此Flask的核心模块已经搭建完成！接下来就可以开始在Flask大展拳脚啦！</p>
<img src="/2022/04/12/Flask-%C2%B7-%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%AE%80%E6%98%93%E7%9A%84%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/10.png" class="">

<h2 id="蓝图"><a href="#蓝图" class="headerlink" title="蓝图"></a>蓝图</h2><p>为了解耦，在视图上进行模块化，将同一类型的视图函数放在同一视图下，创建app/view.py，创建蓝图也很简单呐，只要调用Blueprint并将其赋值给一个变量</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Blueprint</span><br><span class="line"></span><br><span class="line">user_bp = Blueprint(<span class="string">&#x27;user&#x27;</span>, __name__)</span><br></pre></td></tr></table></figure>

<p>接下来就可以通过在app/user/view.py中创建user_bp视图函数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@user_bp.route(<span class="params"><span class="string">&#x27;/login&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">login</span>():</span></span><br><span class="line">	<span class="keyword">pass</span></span><br></pre></td></tr></table></figure>

<p>最后在init.py注册蓝图可以了</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">app.register_blueprint(user_bp)</span><br><span class="line">...</span><br></pre></td></tr></table></figure>



<h2 id="博客"><a href="#博客" class="headerlink" title="博客"></a>博客</h2><p>在正式写代码之前，要理清楚博客中数据库的表的关系，之后只要按照搭建好的模型写代码了</p>
<p>需要构建的模型有用户，文章，文章分类：</p>
<table>
<thead>
<tr>
<th>一对多模型</th>
<th>多对多</th>
</tr>
</thead>
<tbody><tr>
<td>用户和文章</td>
<td>文章和分类</td>
</tr>
</tbody></table>
<p>这里仅搭建一个简易的模型，读者有兴趣可以接着往里面添加模型，还可添加评论，标签等，要想实现一对多，其实只需要一个外键，就可以通过用户找到文章，多对多即在外键的基础上加一个relationship就可以实现！</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Categories</span>(<span class="params">db.Model</span>):</span></span><br><span class="line">    <span class="built_in">id</span> = db.Column(db.Integer, primary_key=<span class="literal">True</span>)</span><br><span class="line">    type_name = db.Column(db.String(<span class="number">20</span>), nullable=<span class="literal">True</span>)</span><br><span class="line">    article = db.relationship(<span class="string">&quot;Article&quot;</span>, backref=<span class="string">&quot;categories&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Article</span>(<span class="params">db.Model</span>):</span></span><br><span class="line">    <span class="built_in">id</span> = db.Column(db.Integer, primary_key=<span class="literal">True</span>)</span><br><span class="line">    title = db.Column(db.String(<span class="number">30</span>), nullable=<span class="literal">True</span>)</span><br><span class="line">    content = db.Column(db.Text, nullable=<span class="literal">True</span>)</span><br><span class="line">    brief = db.Column(db.Text, nullable=<span class="literal">True</span>)</span><br><span class="line">    pdatetime = db.Column(db.DateTime, default=datetime.now)</span><br><span class="line">    click_num = db.Column(db.Integer, default=<span class="number">0</span>)</span><br><span class="line">    love_num = db.Column(db.Integer, default=<span class="number">0</span>)</span><br><span class="line">    <span class="comment"># foreignKey</span></span><br><span class="line">    user_id = db.Column(db.Integer, db.ForeignKey(<span class="string">&quot;user.id&quot;</span>), nullable=<span class="literal">True</span>)</span><br><span class="line">    type_id = db.Column(db.Integer, db.ForeignKey(<span class="string">&quot;categories.id&quot;</span>), nullable=<span class="literal">True</span>)</span><br><span class="line">    comment = db.relationship(<span class="string">&#x27;Comment&#x27;</span>, backref=<span class="string">&quot;article&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>在之前的User模型添加：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span>(<span class="params">db.Model</span>):</span></span><br><span class="line">	...</span><br><span class="line">    icon = db.Column(db.String(<span class="number">40</span>))</span><br><span class="line">    rdatetime = db.Column(db.DateTime, default=datetime.now)</span><br><span class="line">    articles = db.relationship(<span class="string">&#x27;Article&#x27;</span>, backref=<span class="string">&quot;user&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>模型也搭建完成了！</p>
<h3 id="美化"><a href="#美化" class="headerlink" title="美化"></a>美化</h3><p>因为只是建立一个简约的博客，所以用Bootstrap进行快速的开发，Flask也是有这类的插件，通过pip就能够安装：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install flask-bootstrap</span><br></pre></td></tr></table></figure>

<p>重新创建base.html，它继承bootstrap的模板，这样就能直接使用bootstrap的模板了，这里可以让所有页面继承导航栏navbar</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;%extends &quot;bootstrap/base.html&quot;%&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block title %&#125; &#123;% endblock %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block styles %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% endblock %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block navbar %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% endblock %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block content %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure>

<p>到<a target="_blank" rel="noopener" href="https://v3.bootcss.com/components/#navbar">bootstrap的导航栏文档</a>去找个模板来修改，具体美化自行定制</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&#123;%extends &quot;bootstrap/base.html&quot;%&#125;</span><br><span class="line">&#123;% block title %&#125; &#123;% endblock %&#125;</span><br><span class="line">&#123;% block styles %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% endblock %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block navbar %&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">nav</span> <span class="attr">class</span>=<span class="string">&quot;navbar navbar-default&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container-fluid&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;navbar-header&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;navbar-toggle collapsed&quot;</span> <span class="attr">data-toggle</span>=<span class="string">&quot;collapse&quot;</span> <span class="attr">data-target</span>=<span class="string">&quot;#bs-example-navbar-collapse-1&quot;</span> <span class="attr">aria-expanded</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;sr-only&quot;</span>&gt;</span>Toggle navigation<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;icon-bar&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;icon-bar&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;icon-bar&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;navbar-brand&quot;</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>ZYen Blog&amp;nbsp&amp;nbsp&amp;nbsp&amp;nbsp&amp;nbsp&amp;nbsp&amp;nbsp&amp;nbsp<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- Collect the nav links, forms, and other content for toggling --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;collapse navbar-collapse&quot;</span> <span class="attr">id</span>=<span class="string">&quot;bs-example-navbar-collapse-1&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;nav navbar-nav&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;active&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>Home <span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span>About<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>Categories<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="comment">&lt;!-- /.navbar-collapse --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="comment">&lt;!-- /.container-fluid --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line">&#123;% endblock %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block content %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure>

<p>接下来就是慢慢写视图函数，模板渲染的事情了，大体已经完成了！</p>
<img src="/2022/04/12/Flask-%C2%B7-%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%AE%80%E6%98%93%E7%9A%84%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/11.png" class="">

<p>到此，整个简易的个人博客已经搭建完成，其实还是有很多东西可以往里加，包括动态，搜索功能，后台，页面美化等，后期可能会再往里面加吧！</p>
<p><strong>github地址：<a target="_blank" rel="noopener" href="https://github.com/ZYen12138/myblog">https://github.com/ZYen12138/myblog</a></strong></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:1193161901@qq.com">ZYen</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://example.com/2022/04/12/Flask-%C2%B7-%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%AE%80%E6%98%93%E7%9A%84%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/">http://example.com/2022/04/12/Flask-%C2%B7-%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%AE%80%E6%98%93%E7%9A%84%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">欢迎来到ZYen的小世界！</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%BC%80%E5%8F%91%E6%97%A5%E5%B8%B8/">开发日常</a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="next-post pull-full"><a href="/2022/02/13/2021%E5%B9%B4%E5%BA%A6%E6%80%BB%E7%BB%93/"><img class="next-cover" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">2021年度总结</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://img-blog.csdnimg.cn/59ff1b82a08c4567938e7b522a9607a8.jpg?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBAWlllbjEyMTM4,size_20,color_FFFFFF,t_70,g_se,x_16" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">ZYen</div><div class="author-info__description"></div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">25</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">13</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">7</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">你是在寻找散落在人间的星星吗？</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Hello%EF%BC%8CFlask%EF%BC%81"><span class="toc-number">1.</span> <span class="toc-text">Hello，Flask！</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83"><span class="toc-number">1.1.</span> <span class="toc-text">虚拟环境</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84"><span class="toc-number">2.</span> <span class="toc-text">项目结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%90%E8%A1%8CFlask%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%81"><span class="toc-number">3.</span> <span class="toc-text">运行Flask服务器！</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E4%BC%A0%E9%80%92-name-%EF%BC%9F"><span class="toc-number">4.</span> <span class="toc-text">为什么要传递__name__？</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E8%B0%83%E8%AF%95%E6%A8%A1%E5%BC%8F"><span class="toc-number">4.1.</span> <span class="toc-text">配置调试模式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1"><span class="toc-number">5.</span> <span class="toc-text">路由</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A8%A1%E6%9D%BF"><span class="toc-number">6.</span> <span class="toc-text">模板</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A8%A1%E6%9D%BF%E7%BB%A7%E6%89%BF"><span class="toc-number">6.1.</span> <span class="toc-text">模板继承</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%87%E6%BB%A4%E5%99%A8"><span class="toc-number">6.2.</span> <span class="toc-text">过滤器</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A8%A1%E5%9E%8B"><span class="toc-number">7.</span> <span class="toc-text">模型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE"><span class="toc-number">7.1.</span> <span class="toc-text">配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BAUser%E8%A1%A8"><span class="toc-number">7.2.</span> <span class="toc-text">创建User表</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%93%9D%E5%9B%BE"><span class="toc-number">8.</span> <span class="toc-text">蓝图</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%9A%E5%AE%A2"><span class="toc-number">9.</span> <span class="toc-text">博客</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BE%8E%E5%8C%96"><span class="toc-number">9.1.</span> <span class="toc-text">美化</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2022/04/12/Flask-%C2%B7-%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%AE%80%E6%98%93%E7%9A%84%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/" title="Flask · 从零开始构建一个简易的个人博客"><img src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Flask · 从零开始构建一个简易的个人博客"/></a><div class="content"><a class="title" href="/2022/04/12/Flask-%C2%B7-%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%AE%80%E6%98%93%E7%9A%84%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/" title="Flask · 从零开始构建一个简易的个人博客">Flask · 从零开始构建一个简易的个人博客</a><time datetime="2022-04-12T14:23:31.000Z" title="发表于 2022-04-12 22:23:31">2022-04-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/02/13/2021%E5%B9%B4%E5%BA%A6%E6%80%BB%E7%BB%93/" title="2021年度总结"><img src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="2021年度总结"/></a><div class="content"><a class="title" href="/2022/02/13/2021%E5%B9%B4%E5%BA%A6%E6%80%BB%E7%BB%93/" title="2021年度总结">2021年度总结</a><time datetime="2022-02-13T03:42:17.000Z" title="发表于 2022-02-13 11:42:17">2022-02-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/02/04/%E5%A6%82%E4%BD%95%E5%AF%B9ARM%E6%9E%B6%E6%9E%84%E4%B8%8B%E7%9A%84VxWorks%E7%B3%BB%E7%BB%9F%E5%9B%BA%E4%BB%B6%E8%BF%9B%E8%A1%8C%E4%BF%AE%E5%A4%8D%EF%BC%9F/" title="如何对ARM架构下的VxWorks系统固件进行修复？"><img src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="如何对ARM架构下的VxWorks系统固件进行修复？"/></a><div class="content"><a class="title" href="/2022/02/04/%E5%A6%82%E4%BD%95%E5%AF%B9ARM%E6%9E%B6%E6%9E%84%E4%B8%8B%E7%9A%84VxWorks%E7%B3%BB%E7%BB%9F%E5%9B%BA%E4%BB%B6%E8%BF%9B%E8%A1%8C%E4%BF%AE%E5%A4%8D%EF%BC%9F/" title="如何对ARM架构下的VxWorks系统固件进行修复？">如何对ARM架构下的VxWorks系统固件进行修复？</a><time datetime="2022-02-04T13:39:55.000Z" title="发表于 2022-02-04 21:39:55">2022-02-04</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/01/25/%E4%BB%8E%E5%B9%BF%E4%B8%9C%E7%9C%81%E5%BC%BA%E7%BD%91%E6%9D%AF-girlfriend%E4%B8%AD%E7%9C%8Brealloc%E7%9A%84%E8%89%BA%E6%9C%AF/" title="从广东省强网杯--girlfriend中看realloc的艺术"><img src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="从广东省强网杯--girlfriend中看realloc的艺术"/></a><div class="content"><a class="title" href="/2022/01/25/%E4%BB%8E%E5%B9%BF%E4%B8%9C%E7%9C%81%E5%BC%BA%E7%BD%91%E6%9D%AF-girlfriend%E4%B8%AD%E7%9C%8Brealloc%E7%9A%84%E8%89%BA%E6%9C%AF/" title="从广东省强网杯--girlfriend中看realloc的艺术">从广东省强网杯--girlfriend中看realloc的艺术</a><time datetime="2022-01-25T09:25:13.000Z" title="发表于 2022-01-25 17:25:13">2022-01-25</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/01/25/%E5%A6%82%E4%BD%95%E4%BB%8E%E4%B8%B2%E5%8F%A3%E8%8E%B7%E5%8F%96%E5%88%B0%E8%AE%BE%E5%A4%87%E7%9A%84shell%EF%BC%9F/" title="如何从串口获取到设备的shell？"><img src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="如何从串口获取到设备的shell？"/></a><div class="content"><a class="title" href="/2022/01/25/%E5%A6%82%E4%BD%95%E4%BB%8E%E4%B8%B2%E5%8F%A3%E8%8E%B7%E5%8F%96%E5%88%B0%E8%AE%BE%E5%A4%87%E7%9A%84shell%EF%BC%9F/" title="如何从串口获取到设备的shell？">如何从串口获取到设备的shell？</a><time datetime="2022-01-25T08:28:57.000Z" title="发表于 2022-01-25 16:28:57">2022-01-25</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By ZYen</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="/js/search/local-search.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>